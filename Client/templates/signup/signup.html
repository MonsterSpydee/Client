{% load static %}
<!DOCTYPE html>
<html lang="en">

<head>
    <!-- Required meta tags-->
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta name="description" content="Colorlib Templates">
    <meta name="author" content="Colorlib">
    <meta name="keywords" content="Colorlib Templates">

    <!-- Title Page-->
    <title>Registration Form</title>

    <!-- Icons font CSS-->
    <link href="{% static 'signup/css/font-awesome-4.7/css/font-awesome.min.css' %}" rel="stylesheet" media="all">
    <link href="" rel="stylesheet" media="all">
    <!-- Font special for pages-->
    <link href="https://fonts.googleapis.com/css?family=Poppins:100,100i,200,200i,300,300i,400,400i,500,500i,600,600i,700,700i,800,800i,900,900i" rel="stylesheet">

    <!-- Vendor CSS-->
    <link href="{% static 'signup/css/select2/select2.min.css' %}" rel="stylesheet" media="all">
    <link href="{% static 'signup/css/datepicker/daterangepicker.css' %}" rel="stylesheet" media="all">

    <!-- Main CSS-->
    <link href="{% static 'signup/css/main.css' %}" rel="stylesheet" media="all">
</head>

<body>
    <div class="page-wrapper bg-gra-02 p-t-130 p-b-100 font-poppins">
        <div class="wrapper wrapper--w680">
            <div class="card card-4">
                <div class="card-body">
                    <h2 class="title">Registration Form</h2>
                    
                        <div class="row row-space">
                            <div class="col-2">
                                <div class="input-group">
                                    <label class="label">first name</label>
                                    <input class="input--style-4" type="text" name="first_name" id="first_name">
                                </div>
                            </div>
                            <div class="col-2">
                                <div class="input-group">
                                    <label class="label">last name</label>
                                    <input class="input--style-4" type="text" name="last_name" id="last_name">
                                </div>
                            </div>
                        </div>
                        <div class="row row-space">
                            <div class="col-2">
                                <div class="input-group">
                                    <label class="label">Birthday</label>
                                    <div class="input-group-icon">
                                        <input class="input--style-4 js-datepicker" type="text" name="birthday">
                                        <i class="zmdi zmdi-calendar-note input-icon js-btn-calendar"></i>
                                    </div>
                                </div>
                            </div>
                            <div class="col-2">
                                <div class="input-group">
                                    <label class="label">Gender</label>
                                    <div class="p-t-10">
                                        <label class="radio-container m-r-45">Male
                                            <input type="radio" checked="checked" name="gender">
                                            <span class="checkmark"></span>
                                        </label>
                                        <label class="radio-container">Female
                                            <input type="radio" name="gender">
                                            <span class="checkmark"></span>
                                        </label>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="row row-space">
                            <div class="col-2">
                                <div class="input-group">
                                    <label class="label">Username</label>
                                    <input class="input--style-4" type="text" name="username" id="username">
                                </div>
                            </div>
                            <div class="col-2">
                                <div class="input-group">
                                    <label class="label">Password</label>
                                    <input class="input--style-4" type="text" name="phone" id="password">
                                </div>
                            </div>
                        </div>
                        <div class="row row-space">
                            <div class="col-2">
                                <div class="input-group">
                                    <label class="label">Email</label>
                                    <input class="input--style-4" type="email" name="email" id="email">
                                </div>
                            </div>
                        </div>
                        <div class="input-group">
                            <label class="label">Subject</label>
                            <div class="rs-select2 js-select-simple select--no-search">
                                <select name="subject" id="subject">
                                    <option disabled="disabled" selected="selected">Department</option>
                                    <option>CSE</option>
                                    <option>ECE</option>
                                    <option>EEE</option>
                                    <option>ICE</option>
                                    <option>META</option>
                                    <option>CHEM</option>
                                    <option>PROD</option>
                                    <option>MECH</option>
                                </select>
                                <div class="select-dropdown"></div>
                            </div>
                        </div>
                        <div class="p-t-15">
                            <button class="btn btn--radius-2 btn--blue" type="submit" id="create_account_btn">Submit</button>
                        </div>
                    
                </div>
            </div>
        </div>
    </div>

    <!-- Jquery JS-->
    <script src="{% static 'signup/js/jquery/jquery.min.js' %}"></script>
    <!-- Vendor JS-->
    <script src="{% static 'signup/js/select2/select2.min.js' %}"></script>
    <script src="{% static 'signup/js/datepicker/moment.min.js' %}"></script>
    <script src="{% static 'signup/js/datepicker/daterangepicker.js' %}"></script>

    <!-- Main JS-->
    <script src="{% static 'signup/js/global.js' %}"></script>

    <script>

      $(document).ready(function()
      {
        // function getCookie(c_name)
        // {
        //     if (document.cookie.length > 0)
        //     {
        //         c_start = document.cookie.indexOf(c_name + "=");
        //         if (c_start != -1)
        //         {
        //             c_start = c_start + c_name.length + 1;
        //             c_end = document.cookie.indexOf(";", c_start);
        //             if (c_end == -1) c_end = document.cookie.length;
        //             return unescape(document.cookie.substring(c_start,c_end));
        //         }
        //     }
        //     return "";
        //  }
        // $(function () {
        //     $.ajaxSetup({
        //         headers: { "X-CSRFToken": getCookie("csrftoken") }
        //     });
        // });
        //var SERVER_IP = ({{ SERVER_IP }}).toString();
        //console.log(SERVER_IP);
        var AUTHENTICATION_TOKEN = null;
        var st = 0;
        var username, password;
        $("#create_account_btn").click(function()
        {

            var first_name = document.getElementById("first_name").value;
            var last_name = document.getElementById("last_name").value;
            var email = document.getElementById("email").value;
            username = document.getElementById("username").value;
            password = document.getElementById("password").value;
            var branch = $('#subject option:selected').text();
          
          
            alert(branch);
            var obj = {"first_name": first_name, "last_name": last_name, "email": email, "username": username, 
            "password": password, "branch": branch};
            var myJSON = JSON.stringify(obj);

            alert("HEYYYY!");
            makePostRequestSignUp("http://127.0.0.1:8000/auth/signup/", myJSON, null, "POST", "json", "div");
            // console.log(first_name)
            // console.log(last_name)
            // console.log(email)
            // console.log(username)
            // console.log(password)
            // console.log(contact_no)
            // console.log(radioValue)
        });
        function makePostRequestSignUp(url, data, headers, httpverb, datatype, dataType, getElementId)
        {

          $.ajax(
            {
              url: url,
              type: httpverb,
              data: data,
              async: true,
              contentType: 'application/json; charset=utf-8',
              dataType: 'json',
              success: function(data)
              {
                localStorage.AUTHENTICATION_TOKEN = data.token;
                //AUTHENTICATION_TOKEN = data.token;
                //setAuth(AUTHENTICATION_TOKEN);
                //console.log(AUTHENTICATION_TOKEN);
                //console.log(data);
                localStorage.USERNAME = username;
                console.log(localStorage.AUTHENTICATION_TOKEN);
              },
              error: function(data)
              {
                // document.getElementById("modal_text").innerHTML = "Enter valid details to continue";
                // document.getElementById("heading_id").innerHTML = "Registration Failed!";
                // $("#myModal").modal();
                alert("Some error!");
              }
            }
          ).done(function(msg)
            {
              location.href = "../dashboard/";
              alert("Success!");
            }
          );
        }
      });
    </script>


</body><!-- This templates was made by Colorlib (https://colorlib.com) -->

</html>
<!-- end document-->